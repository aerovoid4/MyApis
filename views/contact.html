<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="description" content="Kirim pesan anonim ke Khalid dengan mudah. Jangan ragu untuk berbagi cerita, curhat, atau hanya sekadar menyapa. ðŸ˜‰">
        <meta name="author" content="Khalid's Anonymous Message Platform">
        <meta name="keywords" content="kirim pesan anonim, anonim ke khalid, curhat online, pesan rahasia">
        <meta name="robots" content="index, follow">
        <meta property="og:title" content="Kirim Pesan ke Khalid ðŸ’Œ">
        <meta property="og:description" content="Punya pesan buat Khalid? Kirim sekarang, anonim dan rahasia! ðŸ¥°">
        <meta property="og:image" content="https://avatars.githubusercontent.com/u/147589149?v=4">
        <meta property="og:url" content="https://api.khaliddesu.my.id/ngl">
        <meta property="og:type" content="website">
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:title" content="Kirim Pesan ke Khalid ðŸ’Œ">
        <meta name="twitter:description" content="Punya pesan buat Khalid? Kirim sekarang, anonim dan rahasia! ðŸ¥°">
        <meta name="twitter:image" content="https://avatars.githubusercontent.com/u/147589149?v=4">
        <title>Contact Me</title>
        <link rel="icon" type="x-icon/png" href="https://avatars.githubusercontent.com/u/147589149?v=4">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <style>
            body {
                font-family: 'Poppins', sans-serif;
                display: flex;
                align-items: center;
                justify-content: center;
                height: 100vh;
                margin: 0 auto;
                background-color: rgba(0, 0, 0, 0.5);
                background-image: url('https://i.pinimg.com/originals/16/cd/7d/16cd7d4b4805dfe96850f55edebcec32.jpg');
                background-size: cover;
                background-position: center;
                backdrop-filter: blur(1px);
                color: #fff;
                padding: 25px;
            }

            .container {
                text-align: center;
                background-color: rgba(0, 0, 0, 0.7);
                backdrop-filter: blur(2px);
                padding: 25px;
                border-radius: 15px;
                border: 1px solid rgba(255, 255, 255, 0.5);
                box-shadow: 0 4px 4px rgba(0, 0, 0, 0.3);
                max-width: 650px;
                width: 100%;
            }

            h1 {
                font-weight: 600;
                margin-bottom: 20px;
                font-size: 28px;
            }

            p {
                font-size: 14px;
                margin-bottom: 20px;
                color: #d1d1d1;
            }

            form label {
                display: block;
                text-align: left;
                margin-bottom: 5px;
                color: #bbb;
                font-weight: 500;
            }

            input[type="text"], 
            textarea {
                font-family: 'Poppins', sans-serif;
                font-weight: 500;
                max-width: 200px;
                width: 100%;
                padding: 20px;
                margin-bottom: 15px;
                border: none;
                border-radius: 10px;
                background: #2b2b2b;
                color: #fff;
            }

            input::placeholder,
            textarea::placeholder {
                color: #bbb;
            }

            button {
                font-family: 'Poppins', sans-serif;
                padding: 12px 20px;
                border: none;
                background-color: #1e88e5;
                color: #fff;
                border-radius: 10px;
                cursor: pointer;
                animation: zoom 1s infinite alternate;
            }

            button:hover {
                background-color: #1565c0;
            }

            @keyframes zoom {
                0% {
                    transform: scale(1);
                }
                100% {
                    transform: scale(1.1);
                }
            }

            .footer {
                margin-top: 20px;
                font-size: 12px;
                color: #777;
            }
        </style>
    </head>
    <body>

        <audio id="playback" src="https://k.top4top.io/m_3276sqtgo0.mp3" type="audio" loop=""></audio>

        <div class="container">
            <h1>Contact Me</h1>
            <p>Tulis pesanmu di bawah. Jangan malu-malu ya! ðŸ¥°</p>
            <form id="anonymousForm">
                <label for="name">Nama (Opsional):</label>
                <input type="text" id="name" placeholder="Nama kamu (boleh kosong)">
                <label for="message">Pesanmu:</label>
                <textarea id="message" rows="5" placeholder="Tulis pesanmu di sini..." required></textarea>
                <button type="submit">Kirim Pesan ðŸš€</button>
            </form>
            <div class="footer">Pesanmu anonim, tenang aja! ðŸ˜‰</div>
        </div>

        <script>
            const audio = document.querySelector("#playback");
            setTimeout(() => {
                Swal.fire({
                    title: 'Halo! ðŸŽ¶',
                    text: 'Santai aja, kita muter lagu buat temenin kamu ngisi pesan!',
                    icon: 'info',
                    confirmButtonText: 'Lanjutkan',
                    allowOutsideClick: false,
                }).then(() => {
                    audio.play()
                }).catch(() => {
                    audio.play()
                })
            }, 1000);

            const anonymousForm = document.getElementById('anonymousForm');

            anonymousForm.addEventListener('submit', async (e) => {
                e.preventDefault();

                const userAgent = navigator.userAgent;
                const connection = navigator.connection || {};
                const networkType = connection.effectiveType || 'Tidak diketahui';

                const formData = {
                    name: document.getElementById('name').value || 'Anonim',
                    message: document.getElementById('message').value || 'Tidak ada pesan.',
                    browser: userAgent,
                    networkType: networkType,
                };

                try {
                    const response = await fetch('/api/send', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(formData),
                    });

                    const result = await response.json();

                    if (result.success) {
                        Swal.fire({
                            icon: 'success',
                            title: 'Pesan Terkirim!',
                            text: 'Terima kasih sudah mengirim pesan ðŸ¥³',
                            confirmButtonText: 'OK',
                        });

                        anonymousForm.reset();
                    } else {
                        Swal.fire({
                            icon: 'error',
                            title: 'Gagal Mengirim Pesan!',
                            text: 'Terjadi kesalahan, coba lagi nanti.',
                            confirmButtonText: 'OK',
                        });
                    }
                } catch (error) {
                    console.error('Error:', error);
                    Swal.fire({
                        icon: 'error',
                        title: 'Error!',
                        text: 'Terjadi kesalahan saat mengirim pesan.',
                        confirmButtonText: 'OK',
                    });
                }
            });
        </script>
    </body>
</html>
